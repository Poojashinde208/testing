{
  "version": 3,
  "sources": ["../../../../../../node_modules/@tiptap/extension-youtube/dist/index.js"],
  "sourcesContent": ["import { Node, nodePasteRule, mergeAttributes } from '@tiptap/core';\nconst YOUTUBE_REGEX = /^(https?:\\/\\/)?(www\\.|music\\.)?(youtube\\.com|youtu\\.be|youtube-nocookie\\.com)\\/(?!channel\\/)(?!@)(.+)?$/;\nconst YOUTUBE_REGEX_GLOBAL = /^(https?:\\/\\/)?(www\\.|music\\.)?(youtube\\.com|youtu\\.be)\\/(?!channel\\/)(?!@)(.+)?$/g;\nconst isValidYoutubeUrl = url => {\n  return url.match(YOUTUBE_REGEX);\n};\nconst getYoutubeEmbedUrl = nocookie => {\n  return nocookie ? 'https://www.youtube-nocookie.com/embed/' : 'https://www.youtube.com/embed/';\n};\nconst getEmbedUrlFromYoutubeUrl = options => {\n  const {\n    url,\n    allowFullscreen,\n    autoplay,\n    ccLanguage,\n    ccLoadPolicy,\n    controls,\n    disableKBcontrols,\n    enableIFrameApi,\n    endTime,\n    interfaceLanguage,\n    ivLoadPolicy,\n    loop,\n    modestBranding,\n    nocookie,\n    origin,\n    playlist,\n    progressBarColor,\n    startAt\n  } = options;\n  if (!isValidYoutubeUrl(url)) {\n    return null;\n  }\n  // if is already an embed url, return it\n  if (url.includes('/embed/')) {\n    return url;\n  }\n  // if is a youtu.be url, get the id after the /\n  if (url.includes('youtu.be')) {\n    const id = url.split('/').pop();\n    if (!id) {\n      return null;\n    }\n    return `${getYoutubeEmbedUrl(nocookie)}${id}`;\n  }\n  const videoIdRegex = /(?:v=|shorts\\/)([-\\w]+)/gm;\n  const matches = videoIdRegex.exec(url);\n  if (!matches || !matches[1]) {\n    return null;\n  }\n  let outputUrl = `${getYoutubeEmbedUrl(nocookie)}${matches[1]}`;\n  const params = [];\n  if (allowFullscreen === false) {\n    params.push('fs=0');\n  }\n  if (autoplay) {\n    params.push('autoplay=1');\n  }\n  if (ccLanguage) {\n    params.push(`cc_lang_pref=${ccLanguage}`);\n  }\n  if (ccLoadPolicy) {\n    params.push('cc_load_policy=1');\n  }\n  if (!controls) {\n    params.push('controls=0');\n  }\n  if (disableKBcontrols) {\n    params.push('disablekb=1');\n  }\n  if (enableIFrameApi) {\n    params.push('enablejsapi=1');\n  }\n  if (endTime) {\n    params.push(`end=${endTime}`);\n  }\n  if (interfaceLanguage) {\n    params.push(`hl=${interfaceLanguage}`);\n  }\n  if (ivLoadPolicy) {\n    params.push(`iv_load_policy=${ivLoadPolicy}`);\n  }\n  if (loop) {\n    params.push('loop=1');\n  }\n  if (modestBranding) {\n    params.push('modestbranding=1');\n  }\n  if (origin) {\n    params.push(`origin=${origin}`);\n  }\n  if (playlist) {\n    params.push(`playlist=${playlist}`);\n  }\n  if (startAt) {\n    params.push(`start=${startAt}`);\n  }\n  if (progressBarColor) {\n    params.push(`color=${progressBarColor}`);\n  }\n  if (params.length) {\n    outputUrl += `?${params.join('&')}`;\n  }\n  return outputUrl;\n};\n\n/**\n * This extension adds support for youtube videos.\n * @see https://www.tiptap.dev/api/nodes/youtube\n */\nconst Youtube = Node.create({\n  name: 'youtube',\n  addOptions() {\n    return {\n      addPasteHandler: true,\n      allowFullscreen: true,\n      autoplay: false,\n      ccLanguage: undefined,\n      ccLoadPolicy: undefined,\n      controls: true,\n      disableKBcontrols: false,\n      enableIFrameApi: false,\n      endTime: 0,\n      height: 480,\n      interfaceLanguage: undefined,\n      ivLoadPolicy: 0,\n      loop: false,\n      modestBranding: false,\n      HTMLAttributes: {},\n      inline: false,\n      nocookie: false,\n      origin: '',\n      playlist: '',\n      progressBarColor: undefined,\n      width: 640\n    };\n  },\n  inline() {\n    return this.options.inline;\n  },\n  group() {\n    return this.options.inline ? 'inline' : 'block';\n  },\n  draggable: true,\n  addAttributes() {\n    return {\n      src: {\n        default: null\n      },\n      start: {\n        default: 0\n      },\n      width: {\n        default: this.options.width\n      },\n      height: {\n        default: this.options.height\n      }\n    };\n  },\n  parseHTML() {\n    return [{\n      tag: 'div[data-youtube-video] iframe'\n    }];\n  },\n  addCommands() {\n    return {\n      setYoutubeVideo: options => ({\n        commands\n      }) => {\n        if (!isValidYoutubeUrl(options.src)) {\n          return false;\n        }\n        return commands.insertContent({\n          type: this.name,\n          attrs: options\n        });\n      }\n    };\n  },\n  addPasteRules() {\n    if (!this.options.addPasteHandler) {\n      return [];\n    }\n    return [nodePasteRule({\n      find: YOUTUBE_REGEX_GLOBAL,\n      type: this.type,\n      getAttributes: match => {\n        return {\n          src: match.input\n        };\n      }\n    })];\n  },\n  renderHTML({\n    HTMLAttributes\n  }) {\n    const embedUrl = getEmbedUrlFromYoutubeUrl({\n      url: HTMLAttributes.src,\n      allowFullscreen: this.options.allowFullscreen,\n      autoplay: this.options.autoplay,\n      ccLanguage: this.options.ccLanguage,\n      ccLoadPolicy: this.options.ccLoadPolicy,\n      controls: this.options.controls,\n      disableKBcontrols: this.options.disableKBcontrols,\n      enableIFrameApi: this.options.enableIFrameApi,\n      endTime: this.options.endTime,\n      interfaceLanguage: this.options.interfaceLanguage,\n      ivLoadPolicy: this.options.ivLoadPolicy,\n      loop: this.options.loop,\n      modestBranding: this.options.modestBranding,\n      nocookie: this.options.nocookie,\n      origin: this.options.origin,\n      playlist: this.options.playlist,\n      progressBarColor: this.options.progressBarColor,\n      startAt: HTMLAttributes.start || 0\n    });\n    HTMLAttributes.src = embedUrl;\n    return ['div', {\n      'data-youtube-video': ''\n    }, ['iframe', mergeAttributes(this.options.HTMLAttributes, {\n      width: this.options.width,\n      height: this.options.height,\n      allowfullscreen: this.options.allowFullscreen,\n      autoplay: this.options.autoplay,\n      ccLanguage: this.options.ccLanguage,\n      ccLoadPolicy: this.options.ccLoadPolicy,\n      disableKBcontrols: this.options.disableKBcontrols,\n      enableIFrameApi: this.options.enableIFrameApi,\n      endTime: this.options.endTime,\n      interfaceLanguage: this.options.interfaceLanguage,\n      ivLoadPolicy: this.options.ivLoadPolicy,\n      loop: this.options.loop,\n      modestBranding: this.options.modestBranding,\n      origin: this.options.origin,\n      playlist: this.options.playlist,\n      progressBarColor: this.options.progressBarColor\n    }, HTMLAttributes)]];\n  }\n});\nexport { Youtube, Youtube as default };\n"],
  "mappings": "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",
  "names": []
}
